!function(a,b,c){"use strict";function d(){var a,c,d=b.documentElement,e=0;return a=b.createElement("div"),a.style.cssText="overflow:auto;width:50px;height:50px;position:absolute;left:-100px",c=b.createElement("div"),c.style.cssText="width:100px;height:100px",a.appendChild(c),d.appendChild(a),e=a.offsetWidth-a.clientWidth,d.removeChild(a),e}function e(a){var d=a.charAt(0).toUpperCase()+a.slice(1),e=b.createElement("test"),f=(a+" "+["Webkit","Moz","O","ms"].join(d+" ")+d).split(" ");for(var g in f)if(e.style[f[g]]!==c)return f[g];return!1}function f(a,b,d){for(var e in b)!b.hasOwnProperty(e)||a[e]!==c&&d||(a[e]=b[e]);return a}function g(a,b,c){var d,e,f;if(a.length)for(d=0,e=a.length;e>d;d++)a[d][b]&&a[d][b].apply(a[d],c);else for(f in a)a.hasOwnProperty(f)&&a[f][b]&&a[f][b].apply(a[f],c)}{var h=function p(a,b){return new p.Instance(a,b||{})},i=h.globalSettings={scrollMinUpdateInterval:1e3/60,checkFrequency:1e3,pauseCheck:!1};h.defaults={fixTouchPageBounce:!0,forcedScrollbars:!1,scrollStopDelay:300,maxTrackSize:90,minTrackSize:5,draggableTracks:!0,autoUpdate:!0,classPrefix:"optiscroll",trackTransitions:"height 0.2s ease 0s, width 0.2s ease 0s, opacity 0.2s ease 0s"}}h.Instance=function(a,b){this.element=a,this.scrollElement=a.children[0],this.settings=f(f({},h.defaults),b||{}),this.cache={},this.init()},h.Instance.prototype.init=function(){var a=m.nativeScrollbarSize||this.settings.forcedScrollbars;this.settings.autoUpdate&&m.instances.push(this),this.scrollbars={v:new k("v",this),h:new k("h",this)},a&&(l.hideNativeScrollbars(this.scrollElement),g(this.scrollbars,"create")),m.isTouch&&this.settings.fixTouchPageBounce&&this.element.classList.add(this.settings.classPrefix+"-touchfix"),this.checkScrollSize(),this.bindEvents(),m.checkTimer||l.checkLoop()},h.Instance.prototype.bindEvents=function(){var a=this,b=this.scrollElement;this.scrollEventListener=function(b){j.scroll.call(a,b)},b.addEventListener("scroll",this.scrollEventListener),this.overflowEventListener=function(){a.checkScrollSize()},b.addEventListener("overflow",this.overflowEventListener),b.addEventListener("underflow",this.overflowEventListener),b.addEventListener("overflowchanged",this.overflowEventListener),m.isTouch&&(this.touchstartEventListener=function(b){j.touchstart.call(a,b)},b.addEventListener("touchstart",this.touchstartEventListener),this.touchmoveEventListener=function(b){j.touchmove.call(a,b)},b.addEventListener("touchmove",this.touchmoveEventListener))},h.Instance.prototype.checkScrollSize=function(){var a=this.cache.clientHeight,b=this.scrollElement,d=this.cache,e=b.scrollHeight,f=b.clientHeight,g=b.scrollWidth,h=b.clientWidth;if(e!==d.scrollHeight||f!==d.clientHeight||g!==d.scrollWidth||h!==d.clientWidth){if(0===e&&0===f&&null===this.element.parentNode)return this.destroy(),!1;d.scrollHeight=e,d.clientHeight=f,d.scrollWidth=g,d.clientWidth=h,a!==c&&this.fireCustomEvent("sizechange"),j.scrollStop.call(this)}},h.Instance.prototype.scrollTo=function(a,b,c,d){var e,f,g,h,j=this,k=this.scrollElement,l=this.cache;i.pauseCheck=!0,this.checkScrollSize(),e=g=k.scrollLeft,f=h=k.scrollTop,"string"==typeof a?g="left"===a?0:l.scrollWidth-l.clientWidth:"number"==typeof a&&(g=a),"string"==typeof b?h="top"===b?0:l.scrollHeight-l.clientHeight:"number"==typeof b&&(h=b),this.disableScrollEvent=d,0===c?(k.scrollLeft=g,k.scrollTop=h,o(function(){j.disableScrollEvent=!1})):this.animateScroll(e,g,f,h,c||"auto")},h.Instance.prototype.scrollIntoView=function(a,b,c){var d,e,f,g,h,j,k,l,m,n,o=this.scrollElement;i.pauseCheck=!0,this.checkScrollSize(),"string"==typeof a&&(a=o.querySelector(a)),a.length&&a.jquery&&(a=a[0]),"number"==typeof c&&(c={top:c,right:c,bottom:c,left:c}),c=c||{},d=a.getBoundingClientRect(),e=o.getBoundingClientRect(),k=m=o.scrollLeft,l=n=o.scrollTop,f=k+d.left-e.left-(c.left||0),g=l+d.top-e.top-(c.top||0),h=k+d.left-e.left+d.width-e.width+(c.right||0),j=l+d.top-e.top+d.height-e.height+(c.bottom||0),(k>f||h>k)&&(m=k>f?f:h),(l>g||j>l)&&(n=l>g?g:j),0>m&&(m=0),0>n&&(n=0),(m!==k||n!==l)&&(0===b?(o.scrollLeft=m,o.scrollTop=n):this.animateScroll(k,m,l,n,b||"auto"))},h.Instance.prototype.destroy=function(){var a=this.scrollElement,b=this.scrollbars,c=m.instances.indexOf(this);c>-1&&m.instances.splice(c,1),a.removeEventListener("scroll",this.scrollEventListener),a.removeEventListener("overflow",this.overflowEventListener),a.removeEventListener("underflow",this.overflowEventListener),a.removeEventListener("overflowchanged",this.overflowEventListener),a.removeEventListener("touchstart",this.touchstartEventListener),a.removeEventListener("touchmove",this.touchmoveEventListener),b.dom&&(this.element.removeChild(b.v.el),this.element.removeChild(b.h.el),b=null),a.removeAttribute("style")},h.Instance.prototype.animateScroll=function(a,b,c,d,e){var f=this,g=this.scrollElement,h=n();"auto"===e&&(e=15*Math.pow(Math.max(Math.abs(b-a),Math.abs(d-c)),.62)),"number"!=typeof e&&(e=500);var i=function(){var j=Math.min(1,(n()-h)/e),k=easingFunction(j);d!==c&&(g.scrollTop=k*(d-c)+c),b!==a&&(g.scrollLeft=k*(b-a)+a),1>j?o(i):f.disableScrollEvent=!1};o(i)},h.Instance.prototype.fireCustomEvent=function(a){var b=l.exposedData(this.cache),c=new CustomEvent(a,{detail:b});this.element.dispatchEvent(c)};var j=h.Events={};j.scroll=function(){var a=this,b=this.cache,c=n();this.disableScrollEvent||(i.pauseCheck||m.isTouch||this.element.classList.add(this.settings.classPrefix+"-scrolling"),i.pauseCheck=!0,(!i.scrollMinUpdateInterval||c-(b.scrollNow||0)>=i.scrollMinUpdateInterval)&&(g(this.scrollbars,"update"),b.scrollNow=c,clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(function(){j.scrollStop.call(a)},this.settings.scrollStopDelay)))},j.touchstart=function(){this.scrollbars;clearTimeout(this.scrollStopTimer),this.settings.fixTouchPageBounce&&(g(this.scrollbars,"update"),g(this.scrollbars,"checkEdges")),this.cache.scrollNow=n()},j.touchmove=function(){i.pauseCheck=!0},j.scrollStop=function(){clearTimeout(this.scrollStopTimer),m.isTouch||this.element.classList.remove(this.settings.classPrefix+"-scrolling"),g(this.scrollbars,"update"),this.fireCustomEvent("scrollstop"),g(this.scrollbars,"checkEdges",[!0]),i.pauseCheck=!1};var k=function(a,c){var d="v"===a,e="transform"==m.cssTransform?m.cssTransform:"-"+m.cssTransform.replace("T","-t").toLowerCase(),g=c.element,h=c.scrollElement,i=c.settings,j=c.cache,k=j[a]={},n=d?"clientHeight":"clientWidth",o=d?"scrollHeight":"scrollWidth",p=d?"scrollTop":"scrollLeft",q=d?"height":"width",r=d?["top","bottom"]:["left","right"],s=!1,t=null,u=null,v=null;return{toggle:function(b){s=b,s?g.classList.add(a+"track-on"):g.classList.remove(a+"track-on"),u&&s&&(u.style[m.cssTransition]=i.trackTransitions)},create:function(){t=b.createElement("div"),u=b.createElement("b"),t.className=i.classPrefix+"-"+a,u.className=i.classPrefix+"-"+a+"track",t.appendChild(u),g.appendChild(t),i.draggableTracks&&this.bind()},update:function(){var a,b,c=i.minTrackSize||0,e=i.maxTrackSize||100;a=this.calc(h[p],j[n],j[o],c,e),b=1/a.size*a.position*100,1===a.size&&s&&this.toggle(!1),a.size<1&&!s&&this.toggle(!0),u&&s&&(k.size!==a.size&&(u.style[q]=100*a.size+"%"),m.isTouch&&this.animateTrack(),d?m.cssTransform?u.style[m.cssTransform]="translate(0, "+b+"%)":u.style.top=100*a.position+"%":m.cssTransform?u.style[m.cssTransform]="translate("+b+"%, 0)":u.style.left=100*a.position+"%"),k=f(k,a)},animateTrack:function(){u.style[m.cssTransition]=i.trackTransitions+", "+e+" 0.2s linear 0s"},bind:function(){var a=function(a){var b=a.touches?a.touches[0]:a;v={x:b.pageX,y:b.pageY,scroll:h[p]}},b=function(a){var b,c,e=a.touches?a.touches[0]:a;v&&(a.preventDefault(),b=d?e.pageY-v.y:e.pageX-v.x,c=b/j[n],h[p]=v.scroll+c*j[o])},c=function(){v=null};u.addEventListener("mousedown",a),u.addEventListener("touchstart",a),t.addEventListener("mousemove",b),t.addEventListener("touchmove",b),t.addEventListener("mouseup",c),t.addEventListener("touchend",c)},calc:function(a,b,c,d,e){var f,g,h,i=d/100,j=e/100;return f=b/c,1===f||0===c?{position:0,size:1,percent:0}:(g=a/c,h=100*a/(c-b),f>j&&(g+=(f-j)*(h/100),f=j),i>f&&(g+=(f-i)*(h/100),f=i),0>h&&(g=0),h>100&&(g=1-f),{position:g,size:f,percent:h})},checkEdges:function(a){var b=l.detectEdge(k,j[o],!a);s&&b!==!1&&(k.lastEdge=b,-1!==b&&a&&(c.fireCustomEvent("scrollreachedge"),c.fireCustomEvent("scrollreach"+r[k.lastEdge])),-1!==b&&!a&&i.fixTouchPageBounce&&(scrollFixPosition=k.lastEdge?k.position*j[o]-1:1,c.scrollTo(d?!1:scrollFixPosition,d?scrollFixPosition:!1,0,!0)))}}},l=h.Utils={};l.hideNativeScrollbars=function(a){if(0===m.nativeScrollbarSize){var b=n();a.setAttribute("data-scroll",b),m.isTouch?(a.style.display="none",l.addCssRule('[data-scroll="'+b+'"]::-webkit-scrollbar',"display: none;"),o(function(){a.style.display="block"})):l.addCssRule('[data-scroll="'+b+'"]::-webkit-scrollbar',"width: 0; height: 0;")}else a.style.overflow="scroll",a.style.right=-m.nativeScrollbarSize+"px",a.style.bottom=-m.nativeScrollbarSize+"px"},l.detectEdge=function(a,b,c){var d,e;return d=a.position*b,e=b-(a.position+a.size)*b,0>d&&0===a.lastEdge||0>e&&1===a.lastEdge?!1:1>=d&&d>-1&&(0!==a.lastEdge||c)?0:1>=e&&e>-1&&d>1&&(1!==a.lastEdge||c)?1:!c&&d>1&&e>1?-1:!1},l.exposedData=function(a){var b=f({},a);return b.scrollTop=a.v.position*a.scrollHeight,b.scrollBottom=(1-a.v.position)*a.scrollHeight,b.scrollLeft=a.h.position*a.scrollWidth,b.scrollRight=(1-a.h.position)*a.scrollWidth,b},l.addCssRule=function(a,c){var d=b.getElementById("scroll-sheet");d||(d=b.createElement("style"),d.appendChild(b.createTextNode("")),d.id="scroll-sheet",b.head.appendChild(d)),d.sheet.insertRule?d.sheet.insertRule(a+"{"+c+"}",0):d.sheet.addRule(a,c)},l.checkLoop=function(){return m.instances.length?(i.pauseCheck||m.instances.forEach(function(a){a.checkScrollSize()}),void(i.checkFrequency&&(m.checkTimer=setTimeout(function(){l.checkLoop()},i.checkFrequency)))):void(m.checkTimer=null)},l.easingFunction=function(a){return--a*a*a+1};var m={instances:[],checkTimer:null,isTouch:"ontouchstart"in a,cssTransition:e("transition"),cssTransform:e("transform"),nativeScrollbarSize:d()},n=Date.now||function(){return(new Date).getTime()},o=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}();"function"==typeof define&&define.amd&&define(function(){return h}),"undefined"!=typeof module&&module.exports&&(module.exports=h),a.OptiScroll=h}(window,document),function(a,b){function c(a){this.el=a;for(var b=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/),c=0;c<b.length;c++)f.call(this,b[c])}function d(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}if(!("undefined"==typeof a.Element||"classList"in b.documentElement)){var e=Array.prototype,f=e.push,g=e.splice,h=e.join;c.prototype={add:function(a){this.contains(a)||(f.call(this,a),this.el.className=this.toString())},contains:function(a){return-1!=this.el.className.indexOf(a)},item:function(a){return this[a]||null},remove:function(a){if(this.contains(a)){for(var b=0;b<this.length&&this[b]!=a;b++);g.call(this,b,1),this.el.className=this.toString()}},toString:function(){return h.call(this," ")},toggle:function(a){return this.contains(a)?this.remove(a):this.add(a),this.contains(a)}},a.DOMTokenList=c,d(Element.prototype,"classList",function(){return new c(this)})}}(window,document),window.CustomEvent||function(a,b){function c(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=b.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d}c.prototype=a.Event.prototype,a.CustomEvent=c}(window,document),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)a.call(b,this[c],c,this)});