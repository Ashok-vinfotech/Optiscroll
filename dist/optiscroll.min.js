!function(a,b,c){"use strict";{var d=function l(a,b){return new l.Instance(a,b||{})},e=d.globalSettings={scrollMinUpdateInterval:1e3/60,checkFrequency:1e3,pauseCheck:!1};d.defaults={fixTouchPageBounce:!0,forcedScrollbars:!1,scrollStopDelay:300,maxTrackSize:90,minTrackSize:5,scrollbarsInteractivity:!0,autoUpdate:!0,classPrefix:"optiscroll",trackTransitions:"height 0.2s ease 0s, width 0.2s ease 0s, opacity 0.2s ease 0s"}}d.Instance=function(a,b){this.element=a,this.scrollElement=a.children[0],this.settings=h.extendObj(h.extendObj({},d.defaults),b||{}),this.cache={v:{},h:{}},this.scrollbars={v:{},h:{}},this.init()},d.Instance.prototype.init=function(){var a=k.nativeScrollbarSize||this.settings.forcedScrollbars;this.settings.autoUpdate&&k.instances.push(this),a&&(f.hideNativeScrollbars.call(this),f.createScrollbarElements.call(this)),k.isTouch&&this.settings.fixTouchPageBounce&&this.element.classList.add(this.settings.classPrefix+"-touchfix"),this.checkScrollSize(),this.bindEvents(),k.checkTimer||f.checkLoop()},d.Instance.prototype.bindEvents=function(){var a=this,b=this.scrollElement;this.scrollEventListener=function(b){g.scroll.call(a,b)},b.addEventListener("scroll",this.scrollEventListener),this.overflowEventListener=function(){a.checkScrollSize()},b.addEventListener("overflow",this.overflowEventListener),b.addEventListener("underflow",this.overflowEventListener),b.addEventListener("overflowchanged",this.overflowEventListener),k.isTouch&&(this.touchstartEventListener=function(b){g.touchstart.call(a,b)},b.addEventListener("touchstart",this.touchstartEventListener),this.touchmoveEventListener=function(b){g.touchmove.call(a,b)},b.addEventListener("touchmove",this.touchmoveEventListener))},d.Instance.prototype.checkScrollSize=function(){var a=this.cache.clientHeight,b=this.scrollElement,d=this.cache,e=b.scrollHeight,h=b.clientHeight,i=b.scrollWidth,j=b.clientWidth;if(e!==d.scrollHeight||h!==d.clientHeight||i!==d.scrollWidth||j!==d.clientWidth){if(0===e&&0===h&&null===this.element.parentNode)return this.destroy(),!1;d.scrollHeight=e,d.clientHeight=h,d.scrollWidth=i,d.clientWidth=j,a!==c&&f.fireCustomEvent.call(this,"sizechange"),g.scrollStop.call(this)}},d.Instance.prototype.updateScrollbars=function(){var a,b,c=this.scrollElement,d=this.cache,e=this.scrollbars,g=c.scrollTop,i=c.scrollLeft,j=this.settings.minTrackSize||0,l=this.settings.maxTrackSize||100;a=h.calculateScrollbarDimentions(g,d.clientHeight,d.scrollHeight,j,l),b=h.calculateScrollbarDimentions(i,d.clientWidth,d.scrollWidth,j,l),1===a.size&&e.v.enabled&&f.disableScrollbar.call(this,"v"),a.size<1&&!e.v.enabled&&f.enableScrollbar.call(this,"v"),1===b.size&&e.h.enabled&&f.disableScrollbar.call(this,"h"),b.size<1&&!e.h.enabled&&f.enableScrollbar.call(this,"h"),e.dom&&(d.v.size!==a.size&&(e.v.track.style.height=100*a.size+"%"),d.h.size!==b.size&&(e.h.track.style.width=100*b.size+"%"),k.cssTransform?(k.isTouch&&f.animateTracks.call(this),e.v.track.style[k.cssTransform]="translate(0, "+1/a.size*a.position*100+"%)",e.h.track.style[k.cssTransform]="translate("+1/b.size*b.position*100+"%, 0)"):(e.v.track.style.top=100*a.position+"%",e.v.track.style.left=100*b.position+"%")),d.v=h.extendObj(d.v,a),d.h=h.extendObj(d.h,b)},d.Instance.prototype.scrollTo=function(a,b,c,d){var g,h,i,k,l=this,m=this.scrollElement,n=this.cache;e.pauseCheck=!0,this.checkScrollSize(),g=i=m.scrollLeft,h=k=m.scrollTop,"string"==typeof a?i="left"===a?0:n.scrollWidth-n.clientWidth:"number"==typeof a&&(i=a),"string"==typeof b?k="top"===b?0:n.scrollHeight-n.clientHeight:"number"==typeof b&&(k=b),this.disableScrollEvent=d,0===c?(m.scrollLeft=i,m.scrollTop=k,j(function(){l.disableScrollEvent=!1})):f.animateScroll.call(this,g,i,h,k,c||"auto")},d.Instance.prototype.scrollIntoView=function(a,b,c){var d,g,h,i,j,k,l,m,n,o,p=this.scrollElement;e.pauseCheck=!0,this.checkScrollSize(),"string"==typeof a&&(a=p.querySelector(a)),a.length&&a.jquery&&(a=a[0]),"number"==typeof c&&(c={top:c,right:c,bottom:c,left:c}),c=c||{},d=a.getBoundingClientRect(),g=p.getBoundingClientRect(),l=n=p.scrollLeft,m=o=p.scrollTop,h=l+d.left-g.left-(c.left||0),i=m+d.top-g.top-(c.top||0),j=l+d.left-g.left+d.width-g.width+(c.right||0),k=m+d.top-g.top+d.height-g.height+(c.bottom||0),(l>h||j>l)&&(n=l>h?h:j),(m>i||k>m)&&(o=m>i?i:k),0>n&&(n=0),0>o&&(o=0),(n!==l||o!==m)&&(0===b?(p.scrollLeft=n,p.scrollTop=o):f.animateScroll.call(this,l,n,m,o,b||"auto"))},d.Instance.prototype.destroy=function(){var a=this.scrollElement,b=this.scrollbars,c=k.instances.indexOf(this);c>-1&&k.instances.splice(c,1),a.removeEventListener("scroll",this.scrollEventListener),a.removeEventListener("overflow",this.overflowEventListener),a.removeEventListener("underflow",this.overflowEventListener),a.removeEventListener("overflowchanged",this.overflowEventListener),a.removeEventListener("touchstart",this.touchstartEventListener),a.removeEventListener("touchmove",this.touchmoveEventListener),b.dom&&(this.element.removeChild(b.v.el),this.element.removeChild(b.h.el),b=null),a.removeAttribute("style")},"function"==typeof define&&define.amd&&define(function(){return d}),"undefined"!=typeof module&&module.exports&&(module.exports=d),a.OptiScroll=d;var f=d.Helpers={};f.createScrollbarElements=function(){var a=this.scrollbars,c=this.settings,d=a.v.el=b.createElement("div"),e=a.v.track=b.createElement("b"),f=a.h.el=b.createElement("div"),g=a.h.track=b.createElement("b");d.className=c.classPrefix+"-v",e.className=c.classPrefix+"-vtrack",d.appendChild(e),this.element.appendChild(d),f.className=c.classPrefix+"-h",g.className=c.classPrefix+"-htrack",f.appendChild(g),this.element.appendChild(f),a.dom=!0},f.hideNativeScrollbars=function(){var a=this,b=this.scrollElement;if(0===k.nativeScrollbarSize){var c=i();b.setAttribute("data-scroll",c),k.isTouch?(b.style.display="none",h.addCssRule('[data-scroll="'+c+'"]::-webkit-scrollbar',"display: none;"),j(function(){a.scrollElement.style.display="block"})):h.addCssRule('[data-scroll="'+c+'"]::-webkit-scrollbar',"width: 0; height: 0;")}else b.style.overflow="scroll",b.style.right=-k.nativeScrollbarSize+"px",b.style.bottom=-k.nativeScrollbarSize+"px"},f.checkEdges=function(a){var b,c,d,e=this.scrollbars;e.v.enabled&&(b=this.cache.v,c=h.detectEdge(b,this.cache.scrollHeight,!a),c!==!1&&(b.lastEdge=c,-1!==c&&a&&(f.fireCustomEvent.call(this,"scrollreachedge"),f.fireCustomEvent.call(this,"scrollreach"+(b.lastEdge?"bottom":"top"))),-1!==c&&!a&&this.settings.fixTouchPageBounce&&(d=b.lastEdge?b.position*this.cache.scrollHeight-1:1,this.scrollTo(!1,d,0,!0)))),e.h.enabled&&(b=this.cache.h,c=h.detectEdge(b,this.cache.scrollWidth,!a),c!==!1&&(b.lastEdge=c,-1!==c&&a&&(f.fireCustomEvent.call(this,"scrollreachedge"),f.fireCustomEvent.call(this,"scrollreach"+(b.lastEdge?"right":"left"))),-1!==c&&!a&&this.settings.fixTouchPageBounce&&(d=b.lastEdge?b.position*this.cache.scrollWidth-1:1,this.scrollTo(d,!1,0,!0))))},f.animateScroll=function(a,b,c,d,e){var f=this,g=this.scrollElement,h=i();"auto"===e&&(e=15*Math.pow(Math.max(Math.abs(b-a),Math.abs(d-c)),.62)),"number"!=typeof e&&(e=500);var k=function(){var l=Math.min(1,(i()-h)/e),m=easingFunction(l);d!==c&&(g.scrollTop=m*(d-c)+c),b!==a&&(g.scrollLeft=m*(b-a)+a),1>l?j(k):f.disableScrollEvent=!1};j(k)},f.fireCustomEvent=function(a){var b=h.exposedData(this.cache),c=new CustomEvent(a,{detail:b});this.element.dispatchEvent(c)},f.enableScrollbar=function(a){var b=this.scrollbars,c=b[a];b.dom&&(c.track.style[k.cssTransition]=this.settings.trackTransitions),this.element.classList.add(a+"track-on"),c.enabled=!0},f.disableScrollbar=function(a){var b=this.scrollbars[a];this.element.classList.remove(a+"track-on"),b.enabled=!1},f.animateTracks=function(){var a=this.scrollbars,b=this.settings.trackTransitions,c="transform"==k.cssTransform?k.cssTransform:"-"+k.cssTransform.replace("T","-t").toLowerCase();a.v.track.style[k.cssTransition]=b+", "+c+" 0.2s linear 0s",a.h.track.style[k.cssTransition]=b+", "+c+" 0.2s linear 0s"},f.checkLoop=function(){return k.instances.length?(e.pauseCheck||k.instances.forEach(function(a){a.checkScrollSize()}),void(e.checkFrequency&&(k.checkTimer=setTimeout(function(){f.checkLoop()},e.checkFrequency)))):void(k.checkTimer=null)};var g=d.Events={};g.scroll=function(){var a=this,b=this.cache,c=i();this.disableScrollEvent||(e.pauseCheck||k.isTouch||this.element.classList.add(this.settings.classPrefix+"-scrolling"),e.pauseCheck=!0,(!e.scrollMinUpdateInterval||c-(b.scrollNow||0)>=e.scrollMinUpdateInterval)&&(this.scrollbars.dom&&a.updateScrollbars(),b.scrollNow=c,clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(function(){g.scrollStop.call(a)},this.settings.scrollStopDelay)))},g.touchstart=function(){var a=this.scrollbars;clearTimeout(this.scrollStopTimer),a.dom&&(a.v.track.style[k.cssTransition]=this.settings.trackTransitions,a.h.track.style[k.cssTransition]=this.settings.trackTransitions),this.settings.fixTouchPageBounce&&(this.updateScrollbars(),f.checkEdges.call(this)),this.cache.scrollNow=i()},g.touchmove=function(){e.pauseCheck=!0},g.scrollStop=function(){clearTimeout(this.scrollStopTimer),k.isTouch||this.element.classList.remove(this.settings.classPrefix+"-scrolling"),this.updateScrollbars(),f.fireCustomEvent.call(this,"scrollstop"),f.checkEdges.call(this,!0),e.pauseCheck=!1};var h=d.Utils={};h.cssTest=function(a){var d=a.charAt(0).toUpperCase()+a.slice(1),e=b.createElement("test"),f=(a+" "+["Webkit","Moz","O","ms"].join(d+" ")+d).split(" ");for(var g in f)if(e.style[f[g]]!==c)return f[g];return!1},h.getScrollbarWidth=function(){var a,c,d=b.documentElement,e=0;return a=b.createElement("div"),a.style.cssText="overflow:auto;width:50px;height:50px;position:absolute;left:-100px",c=b.createElement("div"),c.style.cssText="width:100px;height:100px",a.appendChild(c),d.appendChild(a),e=a.offsetWidth-a.clientWidth,d.removeChild(a),e},h.calculateScrollbarDimentions=function(a,b,c,d,e){var f,g,h,i=d/100,j=e/100;return f=b/c,1===f||0===c?{position:0,size:1,percent:0}:(g=a/c,h=100*a/(c-b),f>j&&(g+=(f-j)*(h/100),f=j),i>f&&(g+=(f-i)*(h/100),f=i),0>h&&(g=0),h>100&&(g=1-f),{position:g,size:f,percent:h})},h.detectEdge=function(a,b,c){var d,e;return d=a.position*b,e=b-(a.position+a.size)*b,0>d&&0===a.lastEdge||0>e&&1===a.lastEdge?!1:1>=d&&d>-1&&(0!==a.lastEdge||c)?0:1>=e&&e>-1&&d>1&&(1!==a.lastEdge||c)?1:!c&&d>1&&e>1?-1:!1},h.exposedData=function(a){var b=h.extendObj({},a);return b.scrollTop=a.v.position*a.scrollHeight,b.scrollBottom=(1-a.v.position)*a.scrollHeight,b.scrollLeft=a.h.position*a.scrollWidth,b.scrollRight=(1-a.h.position)*a.scrollWidth,b},h.addCssRule=function(a,c){var d=b.getElementById("scroll-sheet");d||(d=b.createElement("style"),d.appendChild(b.createTextNode("")),d.id="scroll-sheet",b.head.appendChild(d)),d.sheet.insertRule?d.sheet.insertRule(a+"{"+c+"}",0):d.sheet.addRule(a,c)},h.extendObj=function(a,b,d){for(var e in b)!b.hasOwnProperty(e)||a[e]!==c&&d||(a[e]=b[e]);return a},h.easingFunction=function(a){return--a*a*a+1};var i=Date.now||function(){return(new Date).getTime()},j=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},k={instances:[],checkTimer:null,isTouch:"ontouchstart"in a,cssTransition:h.cssTest("transition"),cssTransform:h.cssTest("transform"),nativeScrollbarSize:h.getScrollbarWidth()}}(window,document),function(a,b){function c(a){this.el=a;for(var b=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/),c=0;c<b.length;c++)f.call(this,b[c])}function d(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}if(!("undefined"==typeof a.Element||"classList"in b.documentElement)){var e=Array.prototype,f=e.push,g=e.splice,h=e.join;c.prototype={add:function(a){this.contains(a)||(f.call(this,a),this.el.className=this.toString())},contains:function(a){return-1!=this.el.className.indexOf(a)},item:function(a){return this[a]||null},remove:function(a){if(this.contains(a)){for(var b=0;b<this.length&&this[b]!=a;b++);g.call(this,b,1),this.el.className=this.toString()}},toString:function(){return h.call(this," ")},toggle:function(a){return this.contains(a)?this.remove(a):this.add(a),this.contains(a)}},a.DOMTokenList=c,d(Element.prototype,"classList",function(){return new c(this)})}}(window,document),window.CustomEvent||function(a,b){function c(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=b.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d}c.prototype=a.Event.prototype,a.CustomEvent=c}(window,document),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)a.call(b,this[c],c,this)});